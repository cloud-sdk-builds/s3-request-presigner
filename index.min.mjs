var e={954(){}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var l=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,d=/(\d+\.){3}\d+/,h=/\.\./,f=function(e,t,n){return o(void 0,void 0,void 0,function(){var r,i,u,f,p,g,y,b,w,m,S,x;return a(this,function(O){switch(O.label){case 0:r={},i=(t.getEndpointParameterInstructions||function(){return null})()||{},O.label=1;case 1:O.trys.push([1,10,11,12]),u=s(Object.entries(i)),f=u.next(),O.label=2;case 2:if(f.done)return[3,9];switch(p=c(f.value,2),g=p[0],(y=p[1]).type){case"staticContextParams":return[3,3];case"contextParams":return[3,4];case"clientContextParams":case"builtInParams":return[3,5]}return[3,7];case 3:return r[g]=y.value,[3,8];case 4:return r[g]=e[y.name],[3,8];case 5:return b=r,w=g,[4,v(y.name,g,n)()];case 6:return b[w]=O.sent(),[3,8];case 7:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(y));case 8:return f=u.next(),[3,2];case 9:return[3,12];case 10:return m=O.sent(),S={error:m},[3,12];case 11:try{f&&!f.done&&(x=u.return)&&x.call(u)}finally{if(S)throw S.error}return[7];case 12:return 0===Object.keys(i).length&&Object.assign(r,n),"s3"===String(n.serviceId).toLowerCase()&&function(e){o(void 0,void 0,void 0,function(){var t;return a(this,function(n){return t=(null==e?void 0:e.Bucket)||"",r=t,l.test(r)&&!d.test(r)&&!h.test(r)&&-1===t.indexOf(".")||(e.ForcePathStyle=!0),[2,e];var r})})}(r),[2,r]}})})},v=function(e,t,n){return function(){return o(void 0,void 0,void 0,function(){var r;return a(this,function(i){return"function"==typeof(r=n[e]||n[t])?[2,r()]:[2,r]})})}},p=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(r(r({},this),{headers:r({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce(function(e,n){var i,o=t[n];return r(r({},e),((i={})[n]=Array.isArray(o)?u([],c(o),!1):o,i))},{}))),n},e}(),g=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,y)},y=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())};function b(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.slice(-1)&&(r+=":"),t&&(o+=":".concat(t)),i&&"/"!==i.charAt(0)&&(i="/".concat(i));var a=n?function(e){var t,n,r=[];try{for(var i=s(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,c=e[a];if(a=g(a),Array.isArray(c))for(var u=0,l=c.length;u<l;u++)r.push("".concat(a,"=").concat(g(c[u])));else{var d=a;(c||"string"==typeof c)&&(d+="=".concat(g(c))),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(n):"";return a&&"?"!==a[0]&&(a="?".concat(a)),"".concat(r,"//").concat(o).concat(i).concat(a)}for(var w={},m={},S=0;S<256;S++){var x=S.toString(16).toLowerCase();1===x.length&&(x="0".concat(x)),w[S]=x,m[x]=S}function O(e){for(var t="",n=0;n<e.byteLength;n++)t+=w[e[n]];return t}var j=function(e){if("function"==typeof e)return e;var t=Promise.resolve(e);return function(){return t}},A="X-Amz-Date",C="X-Amz-Signature",P="X-Amz-Security-Token",k="authorization",q=A.toLowerCase(),D=[k,q,"date"],E=C.toLowerCase(),R="x-amz-content-sha256",I=P.toLowerCase(),z={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},H=/^proxy-/,L=/^sec-/,T="AWS4-HMAC-SHA256",N="AWS4-HMAC-SHA256-PAYLOAD",K="aws4_request",X={},U=[],M=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat(K)},W=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},B=function(e,t,n){var r,i,o=e.headers,a={};try{for(var c=s(Object.keys(o).sort()),u=c.next();!u.done;u=c.next()){var l=u.value;if(null!=o[l]){var d=l.toLowerCase();(d in z||(null==t?void 0:t.has(d))||H.test(d)||L.test(d))&&(!n||n&&!n.has(d))||(a[d]=o[l].trim().replace(/\s+/g," "))}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a},G=function(e,t){var n=e.headers,r=e.body;return o(void 0,void 0,void 0,function(){var e,i,o,c,u,l,d;return a(this,function(a){switch(a.label){case 0:try{for(e=s(Object.keys(n)),i=e.next();!i.done;i=e.next())if((o=i.value).toLowerCase()===R)return[2,n[o]]}catch(e){l={error:e}}finally{try{i&&!i.done&&(d=e.return)&&d.call(e)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(h=r,"function"==typeof ArrayBuffer&&h instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(h))?((c=new t).update(r),u=O,[4,c.digest()]):[3,3];case 2:return[2,u.apply(void 0,[a.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var h})})},V=function(e){var t=e.headers,n=e.query,o=i(e,["headers","query"]);return r(r({},o),{headers:r({},t),query:n?F(n):void 0})},F=function(e){return Object.keys(e).reduce(function(t,n){var i,o=e[n];return r(r({},t),((i={})[n]=Array.isArray(o)?u([],c(o),!1):o,i))},{})},Y=function(e){var t,n;e="function"==typeof e.clone?e.clone():V(e);try{for(var r=s(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;D.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},$=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=j(r),this.credentialProvider=j(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){var n,i,o,c,u,l,d,h,f,v,p,g,y,b,w,m,S,x,O,j,k,q,D,E;return a(this,function(a){switch(a.label){case 0:return n=t.signingDate,i=void 0===n?new Date:n,o=t.expiresIn,c=void 0===o?3600:o,u=t.unsignableHeaders,l=t.unhoistableHeaders,d=t.signableHeaders,h=t.signingRegion,f=t.signingService,[4,this.credentialProvider()];case 1:return v=a.sent(),this.validateResolvedCredentials(v),null==h?[3,2]:(g=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:g=a.sent(),a.label=4;case 4:return p=g,y=_(i),b=y.longDate,w=y.shortDate,c>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=M(w,p,null!=f?f:this.service),S=function(e,t){var n,i,o;void 0===t&&(t={});var a="function"==typeof e.clone?e.clone():V(e),c=a.headers,u=a.query,l=void 0===u?{}:u;try{for(var d=s(Object.keys(c)),h=d.next();!h.done;h=d.next()){var f=h.value,v=f.toLowerCase();"x-amz-"!==v.slice(0,6)||(null===(o=t.unhoistableHeaders)||void 0===o?void 0:o.has(v))||(l[f]=c[f],delete c[f])}}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return r(r({},e),{headers:c,query:l})}(Y(e),{unhoistableHeaders:l}),v.sessionToken&&(S.query[P]=v.sessionToken),S.query["X-Amz-Algorithm"]=T,S.query["X-Amz-Credential"]="".concat(v.accessKeyId,"/").concat(m),S.query[A]=b,S.query["X-Amz-Expires"]=c.toString(10),x=B(S,u,d),S.query["X-Amz-SignedHeaders"]=Z(x),O=S.query,j=C,k=this.getSignature,q=[b,m,this.getSigningKey(v,p,w,f)],D=this.createCanonicalRequest,E=[S,x],[4,G(e,this.sha256)]);case 5:return[4,k.apply(this,q.concat([D.apply(this,E.concat([a.sent()]))]))];case 6:return O[j]=a.sent(),[2,S]}})})},e.prototype.sign=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,s=void 0===i?new Date:i,c=t.priorSignature,u=t.signingRegion,l=t.signingService;return o(this,void 0,void 0,function(){var e,t,i,o,d,h,f,v,p,g,y;return a(this,function(a){switch(a.label){case 0:return null==u?[3,1]:(t=u,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=a.sent(),a.label=3;case 3:return e=t,i=_(s),o=i.shortDate,d=i.longDate,h=M(o,e,null!=l?l:this.service),[4,G({headers:{},body:r},this.sha256)];case 4:return f=a.sent(),(v=new this.sha256).update(n),g=O,[4,v.digest()];case 5:return p=g.apply(void 0,[a.sent()]),y=[N,d,h,c,p,f].join("\n"),[2,this.signString(y,{signingDate:s,signingRegion:e,signingService:l})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,s=n.signingRegion,c=n.signingService;return o(this,void 0,void 0,function(){var t,n,r,o,u,l,d,h;return a(this,function(a){switch(a.label){case 0:return[4,this.credentialProvider()];case 1:return t=a.sent(),this.validateResolvedCredentials(t),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=a.sent(),a.label=4;case 4:return n=r,o=_(i).shortDate,d=(l=this.sha256).bind,[4,this.getSigningKey(t,n,o,c)];case 5:return(u=new(d.apply(l,[void 0,a.sent()]))).update(e),h=O,[4,u.digest()];case 6:return[2,h.apply(void 0,[a.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,c=n.signableHeaders,u=n.unsignableHeaders,l=n.signingRegion,d=n.signingService;return o(this,void 0,void 0,function(){var t,n,r,o,h,f,v,p,g,y,b;return a(this,function(a){switch(a.label){case 0:return[4,this.credentialProvider()];case 1:return t=a.sent(),this.validateResolvedCredentials(t),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=a.sent(),a.label=4;case 4:return n=r,o=Y(e),h=_(i),f=h.longDate,v=h.shortDate,p=M(v,n,null!=d?d:this.service),o.headers[q]=f,t.sessionToken&&(o.headers[I]=t.sessionToken),[4,G(o,this.sha256)];case 5:return g=a.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=s(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(R,o.headers)&&this.applyChecksum&&(o.headers[R]=g),y=B(o,u,c),[4,this.getSignature(f,p,this.getSigningKey(t,n,v,d),this.createCanonicalRequest(o,y,g))];case 6:return b=a.sent(),o.headers[k]="".concat(T," ")+"Credential=".concat(t.accessKeyId,"/").concat(p,", ")+"SignedHeaders=".concat(Z(y),", ")+"Signature=".concat(b),[2,o]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],a={},c=function(e){if(e.toLowerCase()===E)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]="".concat(g(e),"=").concat(g(t)):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce(function(t,n){return t.concat(["".concat(g(e),"=").concat(g(n))])},[]).join("&"))};try{for(var u=s(Object.keys(i).sort()),l=u.next();!l.done;l=u.next())c(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map(function(e){return a[e]}).filter(function(e){return e}).join("&")}(e),"\n").concat(r.map(function(e){return"".concat(e,":").concat(t[e])}).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return o(this,void 0,void 0,function(){var r,i;return a(this,function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"".concat(T,"\n").concat(e,"\n").concat(t,"\n").concat(O(i))]}})})},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var i=[];try{for(var o=s(r.split("/")),a=o.next();!a.done;a=o.next()){var c=a.value;0!==(null==c?void 0:c.length)&&"."!==c&&(".."===c?i.pop():i.push(c))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var u="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(i.join("/")).concat(i.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(u).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return o(this,void 0,void 0,function(){var i,o,s,c,u;return a(this,function(a){switch(a.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=a.sent(),c=(s=this.sha256).bind,[4,n];case 2:return(o=new(c.apply(s,[void 0,a.sent()]))).update(i),u=O,[4,o.digest()];case 3:return[2,u.apply(void 0,[a.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return o(void 0,void 0,void 0,function(){var o,c,u,l,d,h,f,v,p;return a(this,function(a){switch(a.label){case 0:return[4,W(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=a.sent(),(c="".concat(n,":").concat(r,":").concat(i,":").concat(O(o),":").concat(t.sessionToken))in X)return[2,X[c]];for(U.push(c);U.length>50;)delete X[U.shift()];u="AWS4".concat(t.secretAccessKey),a.label=2;case 2:a.trys.push([2,7,8,9]),l=s([n,r,i,K]),d=l.next(),a.label=3;case 3:return d.done?[3,6]:(h=d.value,[4,W(e,u,h)]);case 4:u=a.sent(),a.label=5;case 5:return d=l.next(),[3,3];case 6:return[3,9];case 7:return f=a.sent(),v={error:f},[3,9];case 8:try{d&&!d.done&&(p=l.return)&&p.call(l)}finally{if(v)throw v.error}return[7];case 9:return[2,X[c]=u]}})})}(this.sha256,e,n,t,r||this.service)},e.prototype.validateResolvedCredentials=function(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")},e}(),_=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},Z=function(e){return Object.keys(e).sort().join(";")},J=function(){function e(e){this.sigv4Signer=new $(e),this.signerOptions=e}return e.prototype.sign=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){return a(this,function(n){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().sign(e,t)]}return[2,this.sigv4Signer.sign(e,t)]})})},e.prototype.presign=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){return a(this,function(n){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().presign(e,t)]}return[2,this.sigv4Signer.presign(e,t)]})})},e.prototype.getSigv4aSigner=function(){if(!this.sigv4aSigner){var e;try{if("function"!=typeof(e=n(954).CrtSignerV4))throw new Error}catch(e){throw e.message="".concat(e.message,'\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \n')+"For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt",e}this.sigv4aSigner=new e(r(r({},this.signerOptions),{signingAlgorithm:1}))}return this.sigv4aSigner},e}(),Q=function(){function e(e){var t=r({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1,applyChecksum:e.applyChecksum||!1},e);this.signer=new J(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,o=void 0===n?new Set:n,a=t.unhoistableHeaders,s=void 0===a?new Set:a,c=i(t,["unsignableHeaders","unhoistableHeaders"]);o.add("content-type"),Object.keys(e.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){s.add(e)}),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD";var u=e.headers.host,l=e.port,d="".concat(e.hostname).concat(null!=e.port?":"+l:"");return(!u||u===e.hostname&&null!=e.port)&&(e.headers.host=d),this.signer.presign(e,r({expiresIn:900,unsignableHeaders:o,unhoistableHeaders:s},c))},e}(),ee=function(e,t,n){return void 0===n&&(n={}),o(void 0,void 0,void 0,function(){var i,s,c,u,l,d,h;return a(this,function(v){switch(v.label){case 0:return"function"!=typeof e.config.endpointProvider?[3,2]:[4,(g=t.input,y=t.constructor,w=e.config,o(void 0,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,f(g,y,w)];case 1:if(e=t.sent(),"function"!=typeof w.endpointProvider)throw new Error("config.endpointProvider is not set.");return[2,w.endpointProvider(e,void 0)]}})}))];case 1:return s=v.sent(),c=null===(h=null===(d=s.properties)||void 0===d?void 0:d.authSchemes)||void 0===h?void 0:h[0],i=new Q(r(r({},e.config),{signingName:null==c?void 0:c.signingName,region:function(){return o(void 0,void 0,void 0,function(){return a(this,function(e){return[2,null==c?void 0:c.signingScope]})})}})),[3,3];case 2:i=new Q(e.config),v.label=3;case 3:return u=function(e,t){return function(e){return o(void 0,void 0,void 0,function(){var o,s,c;return a(this,function(a){switch(a.label){case 0:if(o=e.request,!p.isInstance(o))throw new Error("Request to be presigned is not an valid HTTP request.");return delete o.headers["amz-sdk-invocation-id"],delete o.headers["amz-sdk-request"],delete o.headers["x-amz-user-agent"],[4,i.presign(o,r(r({},n),{signingRegion:null!==(s=n.signingRegion)&&void 0!==s?s:t.signing_region,signingService:null!==(c=n.signingService)&&void 0!==c?c:t.signing_service}))];case 1:return[2,{response:{},output:{$metadata:{httpStatusCode:200},presigned:a.sent()}}]}})})}},(l=e.middlewareStack.clone()).addRelativeTo(u,{name:"presignInterceptMiddleware",relation:"before",toMiddleware:"awsAuthMiddleware",override:!0}),[4,t.resolveMiddleware(l,e.config,{})({input:t.input})];case 4:return[2,b(v.sent().output.presigned)]}var g,y,w})})};export{Q as S3RequestPresigner,ee as getSignedUrl};